<base:UserControlBase
    x:Class="NarakaBladepoint.Modules.StartGame.UI.MapChose.Views.MapChosePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors"
    xmlns:base="clr-namespace:NarakaBladepoint.Framework.Core.Bases;assembly=NarakaBladepoint.Framework"
    xmlns:controls="clr-namespace:NarakaBladepoint.Controls;assembly=NarakaBladepoint.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:NarakaBladepoint.Modules.StartGame.UI.MapChose.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:NarakaBladepoint.Modules.StartGame.UI.MapChose.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:MapChosePageViewModel}"
    d:DesignHeight="720"
    d:DesignWidth="1080"
    mc:Ignorable="d">
    <Grid Background="#E6000000">
        <Grid Margin="30,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.1*" />
                <RowDefinition />
                <RowDefinition Height="0.1*" />
            </Grid.RowDefinitions>
            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Vertical">
                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    FontSize="36"
                    Foreground="White"
                    Text="选择地图" />
            </StackPanel>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.4*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <CheckBox
                        d:IsChecked="True"
                        Content="全选地图"
                        Foreground="White"
                        Style="{StaticResource DiamondCheckBoxStyle}">
                        <b:Interaction.Triggers>
                            <b:EventTrigger EventName="Checked">
                                <b:InvokeCommandAction Command="{Binding CheckAllMapCommand, Mode=OneWay}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=CheckBox}, Path=IsChecked}" />
                            </b:EventTrigger>
                            <b:EventTrigger EventName="Unchecked">
                                <b:InvokeCommandAction Command="{Binding UnCheckAllMapCommand, Mode=OneWay}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=CheckBox}, Path=IsChecked}" />
                            </b:EventTrigger>
                        </b:Interaction.Triggers>
                    </CheckBox>
                    <ItemsControl Grid.Row="1" ItemsSource="{Binding MapItems, Mode=OneWay}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid d:Rows="4" Rows="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MapItems.Count, Mode=OneWay}" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <controls:HighlightBorder Margin="0,2">
                                    <Grid Background="Transparent">
                                        <Image Source="{Binding MapItemData.MapImage, Mode=OneWay}" />
                                        <CheckBox
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Foreground="White"
                                            IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                            Style="{StaticResource DiamondCheckBoxStyle}" />
                                        <b:Interaction.Triggers>
                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.ClickMapCommand}" CommandParameter="{Binding}" />
                                            </b:EventTrigger>
                                        </b:Interaction.Triggers>
                                    </Grid>
                                </controls:HighlightBorder>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
                <Grid Grid.Column="1" Margin="20,0">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="0.2*" />
                    </Grid.RowDefinitions>
                    <Image d:Source="pack://application:,,,/NarakaBladepoint.Resources;component/Image/Hero/崔三娘.png" Source="{Binding CurrentGifImageSource, Mode=OneWay}" />
                    <Border
                        Height="30"
                        VerticalAlignment="Bottom"
                        Panel.ZIndex="1"
                        Background="#9A000000">
                        <TextBlock
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            d:Text="123123123"
                            FontSize="15"
                            Foreground="White"
                            Text="{Binding Descprition, Mode=OneWay}" />
                    </Border>
                    <StackPanel
                        Grid.Row="1"
                        Margin="0,5,0,0"
                        HorizontalAlignment="Right"
                        Orientation="Vertical">
                        <CheckBox
                            HorizontalAlignment="Right"
                            d:IsChecked="True"
                            Content="超时默认全选地图"
                            Foreground="White"
                            IsChecked="{Binding TimeoutDefaultAllMap}"
                            Style="{StaticResource DiamondCheckBoxStyle}" />
                        <Button
                            Width="300"
                            Height="30"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Right"
                            Command="{Binding SaveCommand}"
                            Content="确定"
                            Style="{StaticResource SettingBackToGameCommandButtonStyle}" />
                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                            <TextBlock
                                Margin="0,5,0,0"
                                HorizontalAlignment="Center"
                                Foreground="White"
                                Text="最少选择" />
                            <TextBlock
                                Margin="0,5,0,0"
                                HorizontalAlignment="Center"
                                d:Text="2"
                                Foreground="#EAB181"
                                Text="{Binding SelectedCount, Mode=OneWay}" />
                            <TextBlock
                                Margin="0,5,0,0"
                                HorizontalAlignment="Center"
                                Foreground="White"
                                Text="张地图" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
        <controls:EscBackControl
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Command="{Binding ReturnCommand}" />
    </Grid>
</base:UserControlBase>
