<bases:UserControlBase
    x:Class="NarakaBladepoint.Modules.SocialTag.UI.Views.SocialTagPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors"
    xmlns:bases="clr-namespace:NarakaBladepoint.Framework.Core.Bases.Views;assembly=NarakaBladepoint.Framework"
    xmlns:controls="clr-namespace:NarakaBladepoint.Controls;assembly=NarakaBladepoint.Controls"
    xmlns:converters="clr-namespace:NarakaBladepoint.Framework.UI.Converters;assembly=NarakaBladepoint.Framework"
    xmlns:core="clr-namespace:Microsoft.Xaml.Behaviors.Core;assembly=Microsoft.Xaml.Behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:NarakaBladepoint.Modules.SocialTag.UI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tagUsercontrol="clr-namespace:NarakaBladepoint.Modules.SocialTag.UI.Views"
    xmlns:viewmodels="clr-namespace:NarakaBladepoint.Modules.SocialTag.UI.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:SocialTagPageViewModel}"
    d:DesignHeight="720"
    d:DesignWidth="1080"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converters:OutRangeMaskVisibilityConverter x:Key="OutRangeMaskVisibilityConverter" />
        <converters:OutRangeEnableConverter x:Key="OutRangeEnableConverter" />
    </UserControl.Resources>
    <Grid Background="{StaticResource Background2}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="0.1*" />
                <RowDefinition />
                <RowDefinition Height="0.1*" />
            </Grid.RowDefinitions>
            <TextBlock
                Margin="20,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontSize="30"
                Foreground="White"
                Text="社交标签" />
            <Grid Grid.Row="1" Margin="50,70,50,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.2*" />
                    <RowDefinition />
                    <RowDefinition Height="0.1*" />
                </Grid.RowDefinitions>
                <Border Background="#2A000000">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Image
                            Width="80"
                            HorizontalAlignment="Left"
                            d:Source="pack://application:,,,/NarakaBladepoint.Resources;component/Image/background2.png"
                            Source="{Binding CurrentUserModel.Avatar, Mode=OneWay}" />
                        <UniformGrid Grid.Column="1" Rows="2">
                            <TextBlock
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                d:Text="名字"
                                FontSize="20"
                                Foreground="White"
                                Text="{Binding CurrentUserModel.Name, Mode=OneWay}" />
                            <tagUsercontrol:TagUserControl />
                        </UniformGrid>
                    </Grid>
                </Border>
                <Grid
                    Grid.Row="1"
                    Margin="0,10,0,0"
                    Background="#2A000000">
                    <Grid Margin="20,10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="80" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.25*" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.4*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                FontSize="15"
                                Foreground="White"
                                Text="在线时间：" />
                            <ItemsControl
                                Grid.Column="1"
                                d:ItemsSource="{d:SampleData ItemCount=5}"
                                ItemsSource="{Binding SocialTagOnlineModels, Mode=OneWay}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.SocialTagOnlineModels.Count, Mode=OneWay}" Rows="1" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox
                                            VerticalAlignment="Center"
                                            d:Content="白天在线"
                                            Content="{Binding SocialTagOnlineData.Text, Mode=OneWay}"
                                            FontSize="15"
                                            Foreground="White"
                                            IsChecked="{Binding IsSelected}"
                                            Style="{StaticResource DiamondCheckBoxStyle}">
                                            <b:Interaction.Triggers>
                                                <b:EventTrigger EventName="Checked">
                                                    <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.CheckOnlineCommand}" CommandParameter="{Binding}" />
                                                </b:EventTrigger>
                                                <b:EventTrigger EventName="Unchecked">
                                                    <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.CheckOnlineCommand}" CommandParameter="{Binding}" />
                                                </b:EventTrigger>
                                            </b:Interaction.Triggers>
                                        </CheckBox>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <!--<UniformGrid Grid.Column="1" Columns="6">
                                <CheckBox
                                    x:Name="DaytimeOnlineCheckBox"
                                    VerticalAlignment="Center"
                                    Checked="DaytimeOnlineCheckBox_Checked"
                                    Content="白天在线"
                                    FontSize="15"
                                    Foreground="White"
                                    Style="{StaticResource DiamondCheckBoxStyle}" />

                                <CheckBox
                                    x:Name="NightOnlineCheckBox"
                                    VerticalAlignment="Center"
                                    Checked="NightOnlineCheckBox_Checked"
                                    Content="晚上在线"
                                    FontSize="15"
                                    Foreground="White"
                                    Style="{StaticResource DiamondCheckBoxStyle}" />

                                <CheckBox
                                    x:Name="AllDayOnlineCheckBox"
                                    VerticalAlignment="Center"
                                    Checked="AllDayOnlineCheckBox_Checked"
                                    Content="全天在线"
                                    FontSize="15"
                                    Foreground="White"
                                    Style="{StaticResource DiamondCheckBoxStyle}" />

                                <CheckBox
                                    x:Name="WeekendOnlineCheckBox"
                                    VerticalAlignment="Center"
                                    Checked="WeekendOnlineCheckBox_Checked"
                                    Content="周末在线"
                                    FontSize="15"
                                    Foreground="White"
                                    Style="{StaticResource DiamondCheckBoxStyle}" />

                                <CheckBox
                                    x:Name="CasualOnlineCheckBox"
                                    VerticalAlignment="Center"
                                    Checked="CasualOnlineCheckBox_Checked"
                                    Content="随缘在线"
                                    FontSize="15"
                                    Foreground="White"
                                    Style="{StaticResource DiamondCheckBoxStyle}" />
                            </UniformGrid>-->

                            <UniformGrid Grid.Column="2" Columns="2">
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="15"
                                    Foreground="White"
                                    Text="麦克风：" />
                                <ItemsControl d:ItemsSource="{d:SampleData ItemCount=2}" ItemsSource="{Binding SocialTagMicModels, Mode=OneWay}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.SocialTagMicModels.Count, Mode=OneWay}" Rows="1" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox
                                                VerticalAlignment="Center"
                                                d:Content="有"
                                                Content="{Binding SocialTagMicData.Text, Mode=OneWay}"
                                                FontSize="15"
                                                Foreground="White"
                                                IsChecked="{Binding IsSelected}"
                                                Style="{StaticResource DiamondCheckBoxStyle}">
                                                <b:Interaction.Triggers>
                                                    <b:EventTrigger EventName="Checked">
                                                        <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.CheckSocialTagMicCommand}" CommandParameter="{Binding}" />
                                                    </b:EventTrigger>
                                                    <b:EventTrigger EventName="Unchecked">
                                                        <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.CheckSocialTagMicCommand}" CommandParameter="{Binding}" />
                                                    </b:EventTrigger>
                                                </b:Interaction.Triggers>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </UniformGrid>
                        </Grid>
                        <Grid Grid.Row="1">
                            <TabControl
                                Background="Transparent"
                                Style="{StaticResource VerticalTabControlStyle}"
                                TabStripPlacement="Left">
                                <controls:ImageTextTabItem
                                    Margin="0,5"
                                    d:IsSelected="True"
                                    Background="#1A000000"
                                    ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/tabItemIcon1.png"
                                    IsMouseOverHilightBoder="True"
                                    IsSelectedHilgihtBoder="True"
                                    SelectedBackground="#1A000000"
                                    Text="战斗">
                                    <Grid Margin="20,5">
                                        <ItemsControl d:ItemsSource="{d:SampleData ItemCount=15}" ItemsSource="{Binding FightTags}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="5" Rows="7" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Margin="2">
                                                        <Border.Background>
                                                            <ImageBrush ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/background.png" Stretch="UniformToFill" />
                                                        </Border.Background>
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </Trigger>
                                                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid>
                                                            <Rectangle
                                                                Panel.ZIndex="1"
                                                                Fill="#E6000000"
                                                                Opacity="0.5">
                                                                <Rectangle.Visibility>
                                                                    <MultiBinding Converter="{StaticResource OutRangeMaskVisibilityConverter}">
                                                                        <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                        <Binding Path="IsSelected" />
                                                                        <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                                    </MultiBinding>
                                                                </Rectangle.Visibility>
                                                            </Rectangle>
                                                            <Grid>
                                                                <TextBlock
                                                                    Margin="10,0,0,0"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    d:Text="指挥家"
                                                                    Foreground="White"
                                                                    Text="{Binding SocialTagData.Text, Mode=OneWay}" />
                                                                <Canvas
                                                                    Width="20"
                                                                    Height="20"
                                                                    HorizontalAlignment="Right"
                                                                    Visibility="{Binding IsSelected, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Path
                                                                        x:Name="checkedPath"
                                                                        Data="M6,9 L9,12 14,7"
                                                                        Opacity="5"
                                                                        Stroke="#EAB181"
                                                                        StrokeEndLineCap="Round"
                                                                        StrokeLineJoin="Round"
                                                                        StrokeStartLineCap="Round"
                                                                        StrokeThickness="2" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                        <Border.IsEnabled>
                                                            <MultiBinding Converter="{StaticResource OutRangeEnableConverter}">
                                                                <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                <Binding Path="IsSelected" />
                                                                <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                            </MultiBinding>
                                                        </Border.IsEnabled>
                                                        <b:Interaction.Triggers>
                                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MouseLeftButtonDown}" CommandParameter="{Binding}" />
                                                            </b:EventTrigger>
                                                        </b:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </controls:ImageTextTabItem>
                                <controls:ImageTextTabItem
                                    Margin="0,5"
                                    d:IsSelected="True"
                                    Background="#1A000000"
                                    ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/tabItemIcon2.png"
                                    IsMouseOverHilightBoder="True"
                                    IsSelectedHilgihtBoder="True"
                                    SelectedBackground="#1A000000"
                                    Text="社交">
                                    <Grid Margin="20,5">
                                        <ItemsControl d:ItemsSource="{d:SampleData ItemCount=15}" ItemsSource="{Binding SocialTags}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="5" Rows="7" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Margin="2">
                                                        <Border.Background>
                                                            <ImageBrush ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/background.png" Stretch="UniformToFill" />
                                                        </Border.Background>
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </Trigger>
                                                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid>
                                                            <Rectangle
                                                                Panel.ZIndex="1"
                                                                Fill="#E6000000"
                                                                Opacity="0.5">
                                                                <Rectangle.Visibility>
                                                                    <MultiBinding Converter="{StaticResource OutRangeMaskVisibilityConverter}">
                                                                        <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                        <Binding Path="IsSelected" />
                                                                        <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                                    </MultiBinding>
                                                                </Rectangle.Visibility>
                                                            </Rectangle>
                                                            <Grid>
                                                                <TextBlock
                                                                    Margin="10,0,0,0"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    d:Text="指挥家"
                                                                    Foreground="White"
                                                                    Text="{Binding SocialTagData.Text, Mode=OneWay}" />
                                                                <Canvas
                                                                    Width="20"
                                                                    Height="20"
                                                                    HorizontalAlignment="Right"
                                                                    Visibility="{Binding IsSelected, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Path
                                                                        x:Name="checkedPath"
                                                                        Data="M6,9 L9,12 14,7"
                                                                        Opacity="5"
                                                                        Stroke="#EAB181"
                                                                        StrokeEndLineCap="Round"
                                                                        StrokeLineJoin="Round"
                                                                        StrokeStartLineCap="Round"
                                                                        StrokeThickness="2" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                        <Border.IsEnabled>
                                                            <MultiBinding Converter="{StaticResource OutRangeEnableConverter}">
                                                                <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                <Binding Path="IsSelected" />
                                                                <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                            </MultiBinding>
                                                        </Border.IsEnabled>
                                                        <b:Interaction.Triggers>
                                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MouseLeftButtonDown}" CommandParameter="{Binding}" />
                                                            </b:EventTrigger>
                                                        </b:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </controls:ImageTextTabItem>
                                <controls:ImageTextTabItem
                                    Margin="0,5"
                                    d:IsSelected="True"
                                    Background="#1A000000"
                                    ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/tabItemIcon3.png"
                                    IsMouseOverHilightBoder="True"
                                    IsSelectedHilgihtBoder="True"
                                    SelectedBackground="#1A000000"
                                    Text="个性">
                                    <Grid Margin="20,5">
                                        <ItemsControl d:ItemsSource="{d:SampleData ItemCount=15}" ItemsSource="{Binding PersonalityTags}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="5" Rows="7" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Margin="2">
                                                        <Border.Background>
                                                            <ImageBrush ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/background.png" Stretch="UniformToFill" />
                                                        </Border.Background>
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </Trigger>
                                                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid>
                                                            <Rectangle
                                                                Panel.ZIndex="1"
                                                                Fill="#E6000000"
                                                                Opacity="0.5">
                                                                <Rectangle.Visibility>
                                                                    <MultiBinding Converter="{StaticResource OutRangeMaskVisibilityConverter}">
                                                                        <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                        <Binding Path="IsSelected" />
                                                                        <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                                    </MultiBinding>
                                                                </Rectangle.Visibility>
                                                            </Rectangle>
                                                            <Grid>
                                                                <TextBlock
                                                                    Margin="10,0,0,0"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    d:Text="指挥家"
                                                                    Foreground="White"
                                                                    Text="{Binding SocialTagData.Text, Mode=OneWay}" />
                                                                <Canvas
                                                                    Width="20"
                                                                    Height="20"
                                                                    HorizontalAlignment="Right"
                                                                    Visibility="{Binding IsSelected, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Path
                                                                        x:Name="checkedPath"
                                                                        Data="M6,9 L9,12 14,7"
                                                                        Opacity="5"
                                                                        Stroke="#EAB181"
                                                                        StrokeEndLineCap="Round"
                                                                        StrokeLineJoin="Round"
                                                                        StrokeStartLineCap="Round"
                                                                        StrokeThickness="2" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                        <Border.IsEnabled>
                                                            <MultiBinding Converter="{StaticResource OutRangeEnableConverter}">
                                                                <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                <Binding Path="IsSelected" />
                                                                <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                            </MultiBinding>
                                                        </Border.IsEnabled>
                                                        <b:Interaction.Triggers>
                                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MouseLeftButtonDown}" CommandParameter="{Binding}" />
                                                            </b:EventTrigger>
                                                        </b:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </controls:ImageTextTabItem>
                                <controls:ImageTextTabItem
                                    Margin="0,5"
                                    d:IsSelected="True"
                                    Background="#1A000000"
                                    ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/tabItemIcon4.png"
                                    IsMouseOverHilightBoder="True"
                                    IsSelectedHilgihtBoder="True"
                                    SelectedBackground="#1A000000"
                                    Text="模式">
                                    <Grid Margin="20,5">
                                        <ItemsControl d:ItemsSource="{d:SampleData ItemCount=15}" ItemsSource="{Binding ModeTags}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="5" Rows="7" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Margin="2">
                                                        <Border.Background>
                                                            <ImageBrush ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/background.png" Stretch="UniformToFill" />
                                                        </Border.Background>
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </Trigger>
                                                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid>
                                                            <Rectangle
                                                                Panel.ZIndex="1"
                                                                Fill="#E6000000"
                                                                Opacity="0.5">
                                                                <Rectangle.Visibility>
                                                                    <MultiBinding Converter="{StaticResource OutRangeMaskVisibilityConverter}">
                                                                        <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                        <Binding Path="IsSelected" />
                                                                        <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                                    </MultiBinding>
                                                                </Rectangle.Visibility>
                                                            </Rectangle>
                                                            <Grid>
                                                                <TextBlock
                                                                    Margin="10,0,0,0"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    d:Text="指挥家"
                                                                    Foreground="White"
                                                                    Text="{Binding SocialTagData.Text, Mode=OneWay}" />
                                                                <Canvas
                                                                    Width="20"
                                                                    Height="20"
                                                                    HorizontalAlignment="Right"
                                                                    Visibility="{Binding IsSelected, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Path
                                                                        x:Name="checkedPath"
                                                                        Data="M6,9 L9,12 14,7"
                                                                        Opacity="5"
                                                                        Stroke="#EAB181"
                                                                        StrokeEndLineCap="Round"
                                                                        StrokeLineJoin="Round"
                                                                        StrokeStartLineCap="Round"
                                                                        StrokeThickness="2" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                        <Border.IsEnabled>
                                                            <MultiBinding Converter="{StaticResource OutRangeEnableConverter}">
                                                                <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                <Binding Path="IsSelected" />
                                                                <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                            </MultiBinding>
                                                        </Border.IsEnabled>
                                                        <b:Interaction.Triggers>
                                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MouseLeftButtonDown}" CommandParameter="{Binding}" />
                                                            </b:EventTrigger>
                                                        </b:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </controls:ImageTextTabItem>
                                <controls:ImageTextTabItem
                                    Margin="0,5"
                                    d:IsSelected="True"
                                    Background="#1A000000"
                                    ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/tabItemIcon5.png"
                                    IsMouseOverHilightBoder="True"
                                    IsSelectedHilgihtBoder="True"
                                    SelectedBackground="#1A000000"
                                    Text="语言">
                                    <Grid Margin="20,5">
                                        <ItemsControl d:ItemsSource="{d:SampleData ItemCount=15}" ItemsSource="{Binding LanguageTags}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <UniformGrid Columns="5" Rows="7" />
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Margin="2">
                                                        <Border.Background>
                                                            <ImageBrush ImageSource="pack://application:,,,/NarakaBladepoint.Resources;component/Image/SocialTag/background.png" Stretch="UniformToFill" />
                                                        </Border.Background>
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </Trigger>
                                                                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                                        <Setter Property="BorderThickness" Value="2" />
                                                                        <Setter Property="BorderBrush" Value="White" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <Grid>
                                                            <Rectangle
                                                                Panel.ZIndex="1"
                                                                Fill="#E6000000"
                                                                Opacity="0.5">
                                                                <Rectangle.Visibility>
                                                                    <MultiBinding Converter="{StaticResource OutRangeMaskVisibilityConverter}">
                                                                        <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                        <Binding Path="IsSelected" />
                                                                        <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                                    </MultiBinding>
                                                                </Rectangle.Visibility>
                                                            </Rectangle>
                                                            <Grid>
                                                                <TextBlock
                                                                    Margin="10,0,0,0"
                                                                    HorizontalAlignment="Left"
                                                                    VerticalAlignment="Center"
                                                                    d:Text="指挥家"
                                                                    Foreground="White"
                                                                    Text="{Binding SocialTagData.Text, Mode=OneWay}" />
                                                                <Canvas
                                                                    Width="20"
                                                                    Height="20"
                                                                    HorizontalAlignment="Right"
                                                                    Visibility="{Binding IsSelected, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Path
                                                                        x:Name="checkedPath"
                                                                        Data="M6,9 L9,12 14,7"
                                                                        Opacity="5"
                                                                        Stroke="#EAB181"
                                                                        StrokeEndLineCap="Round"
                                                                        StrokeLineJoin="Round"
                                                                        StrokeStartLineCap="Round"
                                                                        StrokeThickness="2" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                        <Border.IsEnabled>
                                                            <MultiBinding Converter="{StaticResource OutRangeEnableConverter}">
                                                                <Binding Path="DataContext.SelectedCount" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                                <Binding Path="IsSelected" />
                                                                <Binding Path="DataContext.MaxCount" RelativeSource="{RelativeSource AncestorType=UserControl, Mode=FindAncestor}" />
                                                            </MultiBinding>
                                                        </Border.IsEnabled>
                                                        <b:Interaction.Triggers>
                                                            <b:EventTrigger EventName="MouseLeftButtonDown">
                                                                <b:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}, Path=DataContext.MouseLeftButtonDown}" CommandParameter="{Binding}" />
                                                            </b:EventTrigger>
                                                        </b:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </Grid>
                                </controls:ImageTextTabItem>
                            </TabControl>
                        </Grid>
                    </Grid>
                </Grid>
                <Grid Grid.Row="2" Margin="20,10">
                    <TextBlock
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Foreground="White">
                        <Run Text="可装配数量：" />
                        <Run d:Text="2" Text="{Binding SelectedCount, Mode=OneWay}" />
                        <Run Text="/" />
                        <Run d:Text="4" Text="{Binding MaxCount, Mode=OneWay}" />
                    </TextBlock>
                </Grid>
            </Grid>
            <controls:EscBackControl
                Grid.Row="2"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Command="{Binding ReturnCommand}" />
        </Grid>
    </Grid>
</bases:UserControlBase>





